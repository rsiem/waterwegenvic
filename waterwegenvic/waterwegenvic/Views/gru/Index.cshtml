@model IEnumerable<waterwegenvic.Models.gru>

@{
    ViewBag.Title = "Stormwater";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Styles.Render("~/Content/stormwater")
@Scripts.Render("~/bundles/stormwater")

<!--Header Section of the Stormwater Pollution page-->
<div class="row" id="groundwater">
    <div class="container-fluid">
        <div class=" row">
            <section class="first-section hero" style="background-image:url('../../Content/Image/Background/stormwater_heading.png'); width: 100%">
                <div class="hero-inner text-context">
                    <p><b>Stormwater Pollution</b></p>
                    <hr />
                    <h4>Treat water right, it is your life</h4>
                </div>
            </section>
        </div>
    </div>
</div>
<!--Header End-->
<br />
<!--Stormwater pollution content-->
<div class="row" id="groundwater-page">
    <div class="container-fluid" id="background">
        <div class="groundwater-page">
            <div class="container">
                <!--Introduction to the topic-->
                <div class="row" id="introduction">
                    <p>
                        Stormwater is one of the main causes of water pollution. Also,
                        it contributes to the water crisis by polluting the groundwater.
                        This mix of stormwater and untreated pollutants enters the stormwater
                        drainage system and from there into rivers and groundwater ultimately
                        waterways.
                    </p>
                </div>
                <!--End Introduction-->
            </div>
            <br />
            <br />
            <!--Lifecycle of water -->
            <div class="container">
                <div class="row" id="title">
                    <p>Relationship between stormwater and drinking water</p>
                </div>
                <br />
                <div class="row">
                    <p>
                        The movement of stormwater across the surface can cause erosion and carry
                        pollutants into our bodies of river, which is the result of water cycle.
                        Water never stands still but is always in constant movement. It happens on,
                        above and below the surface of earth. Therefore the water may exist and
                        transfers in the form of clouds, rain, groundwater and waterways. These
                        movements and transformations may result in a series of pollution.
                    </p>
                </div>
                <br />
                <div class="row">
                    <div id="renderToDiv" style="margin-left:auto;margin-right:auto;">

                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="rainDetailModal" role="dialog">
                        <div class="modal-dialog modal-lg">

                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header modelDialogHeader">
                                    <button type="button" class="close closeModelDialog" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Rain</h4>
                                </div>
                                <div class="modal-body" style="color:black;">

                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog">
                                                <div style="float:left;" class="questionModelDialog">WHAT IS RAIN?</div>
                                                @*<div style="float:left;">
                                            <img src="~/Content/Image/WaterCycle/drop.jfif" style="width:50px;">
                                        </div>*@
                                            </p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                Rain is liquid water in the form of droplets. They condensed from water vapour
                                                in atmospheric when they become heavy enough; they will fall to the earth because
                                                of the gravity.
                                            </p>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/rain2.png" draggable="false" style="width:70%;">
                                        </div>
                                    </div>

                                    <div class="row" style="padding-top: 25px;">
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/coudy.jpg" draggable="false" style="width:80%;">
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/arrow_image.jpg" draggable="false" style="width:80%;">
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/whitestormwater.jpg" draggable="false" style="width:80%;">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <p class="questionModelDialog">HOW CAN RAIN TRANSFER INTO STORMWATER? </p>
                                            <p class="answerModelDialog">
                                                The water drops falling to the ground because of the precipitation activities in the
                                                form of rain. After the rain falls on the earth and flows into our drainage system,
                                                it becomes what we called stormwater.
                                            </p>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12 col-sm-12" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/rainfall99.png" draggable="false" style="width:100%;">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:right; float:left">
                                            <img src="~/Content/Image/WaterCycle/imark.jpg" draggable="false" style="width:35%;">
                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog">
                                                <div style="float:left;" class="questionModelDialog">
                                                    DO YOU KNOW...
                                                </div>
                                            </p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                Each year, 19,700 million litres of rain falls on Melbourne, which would fill 7,880
                                                swimming pools.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="stormWaterDetailModal" role="dialog">
                        <div class="modal-dialog modal-lg">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header modelDialogHeader">
                                    <button type="button" class="close closeModelDialog" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Stormwater</h4>
                                </div>
                                <div class="modal-body" style="color:black;">
                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog">WHAT IS STORMWATER?</p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                Stormwater comes from precipitation events, such as rain or storm. Rain falls on the earth,
                                                flows along the surface as run-off; in the end, it enters the drainage system, now the
                                                water exists in the form of stormwater.
                                            </p>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/whitestormwater.jpg" draggable="false" style="width:45%;">
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <p class="questionModelDialog">HOW CAN GROUNDWATER GET CONTAMINATED BY STORMWATER?</p>
                                            <p class="answerModelDialog">
                                                After stormwater seeps into the ground, the water is available for us in the form of
                                                groundwater. However, at the same time pollutants (including leaves, sediment, oil
                                                and other hydrocarbons) carried by stormwater also flow into the groundwater. These
                                                pollutants are the main causes of groundwater pollution.
                                            </p>
                                        </div>
                                    </div>
                                    <div class="row" style="padding-top: 25px;">
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/leaves.png" draggable="false" style="width:75%;">
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/gas.png" draggable="false" style="width:75%;">
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/ho.png" draggable="false" style="width:75%;">
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:right; float:left">
                                            <img src="~/Content/Image/WaterCycle/imark.jpg" draggable="false" style="width:45%;">
                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog">
                                                <div style="float:left;" class="questionModelDialog">
                                                    DO YOU KNOW...
                                                </div>
                                            </p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                Each year, 105.73 million litres of stormwater flow into the city's waterways as well as groundwater.
                                                Therefore, if the stormwater contains any pollutants and it is not intercepted by any form of water
                                                treatment, it will pollute our waterways and groundwater as a consequence.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="groundWaterDetailModal" role="dialog">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header modelDialogHeader">
                                    <button type="button" class="close closeModelDialog" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Groundwater</h4>
                                </div>
                                <div class="modal-body" style="color:black;">
                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog">WHAT IS GROUNDWATER?</p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                Groundwater exists under the earth's surface. It is in pores and crevices between rocks and soil.
                                                The layer that contains usable quantities of groundwater is called aquifer. Aquifers lie
                                                under all parts of Victoria.
                                            </p>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/groundwater.jpg" draggable="false" style="width:50%;">
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <p class="questionModelDialog"> THE USE OF GROUNDWATER </p>
                                            <p class="answerModelDialog">
                                                In Australia, groundwater makes up approximately 17% of accessible water resources, and
                                                it is the source of over 30% of total consumption water. Also, groundwater is the
                                                primary source of drinking water in Victoria. About 70 towns in Victoria rely on
                                                groundwater as their primary water supply.
                                            </p>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:right; float:left">
                                            <img src="~/Content/Image/WaterCycle/imark.jpg" draggable="false" style="width:45%;">
                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog"><div style="float:left;" class="questionModelDialog">DO YOU KNOW...</div></p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                Drinking the polluted groundwater can cause serious diseases, such as hepatitis, dysentery.
                                                Some long term effects like certain cancer are also the consequence of using polluted
                                                groundwater.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="drinkingWaterDetailModal" role="dialog">
                        <div class="modal-dialog modal-lg">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header modelDialogHeader">
                                    <button type="button" class="close closeModelDialog" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Drinking Water</h4>
                                </div>
                                <div class="modal-body" style="color:black;">
                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog" style="text-transform:uppercase;">WHAT WATER CAN BE USED AS DRINKING WATER?</p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                Drinking water is water safe to drink or to use for food preparation.
                                                The drinking water is needed for everyone to maintain good health.
                                            </p>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/drinkingwater.jpg" draggable="false" style="width:55%;">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <p class="questionModelDialog" style="text-transform:uppercase;">THE IMPORTANCE OF DRINKING WATER</p>
                                            <p class="answerModelDialog">
                                                Water is an essential nutrient and makes up 50-60% of the human body weight. On average a
                                                person can survive for about 40 days without food, but most people will die if they
                                                do not drink any water over 72 hours.
                                            </p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:right; float:left">
                                            <img src="~/Content/Image/WaterCycle/imark.jpg" draggable="false" style="width:40%;">
                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog"><div style="float:left;" class="questionModelDialog">DO YOU KNOW...</div></p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                <ul>
                                                    <li>A boy between 14-18 years old require 2.7L water per day.</li>
                                                    <li>A girl between 14-18 years old require 2.2L water per day.</li>
                                                </ul>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal fade" id="waterWayDetailModal" role="dialog">
                        <div class="modal-dialog modal-lg">

                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header modelDialogHeader">
                                    <button type="button" class="close closeModelDialog" data-dismiss="modal">&times;</button>
                                    <h4 class="modal-title">Waterways</h4>
                                </div>
                                <div class="modal-body" style="color:black;">
                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog">WHAT IS WATERWAY?</p>
                                            <div style="clear:both;"></div>
                                            <p class="answerModelDialog">
                                                The waterway is any navigable body of water. There are three categories of waterway in
                                                Victoria: which are inland water, enclosed water and coastal water. The most common
                                                waterways we have seen is inland water like rivers, lakes or creeks.
                                            </p>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/waterways.jpg" draggable="false" style="width:65%;">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                            <p class="questionModelDialog" style="text-transform:uppercase;"><br />EVAPORATION</p>
                                            <p class="answerModelDialog">
                                                The sun heats the water from waterways and water changes into water vapour.
                                                This is the process of evaporation. Then these water vapours form tiny water
                                                droplets and eventually fall in the form of rain. By the process showing above,
                                                the water transfer back to the rain again.
                                            </p>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="text-align:center;">
                                            <img src="~/Content/Image/WaterCycle/evaporation.jpg" draggable="false" style="width:65%;">
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--End of water lifecycle-->
            <!--Primary Sources of stormwater pollution section start-->
            <div class="row">
                <div class="container-fluid last-section">
                    <div class="container">
                        <div class="row" id="title">
                            <p>Primary sources of stormwater pollution</p>
                        </div>
                        <br />
                        <div class="row">
                            <p>
                                In the rainy season where there is heavy rainfall, a high volume of water may be contaminated
                                in an area where chemical wastage such as pesticides, fertilizers and gasoline are present.
                            </p>
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <img class="img-responsive" src="~/Content/Image/compo_of_storm_pollution.png" draggable="false" style="width:90%;margin:auto;" />
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                                <div class="row">
                                    <br />
                                    <p>
                                        <ul>
                                            <li>Chemical Pollution</li>
                                            &emsp; Metals, hydrocarbons, pesticides, fertilizers or detergents
                                            <li>Litter</li>
                                            &emsp; Cigarette butts, cans, food wrappers, plastic bags or paper
                                            <li>Organic / 'Natural' Pollution</li>
                                            &emsp; Leaves, garden clippings or animal faeces
                                            <li>Bacterial Pollution</li>
                                            &emsp; From leaking, broken or overflowing sewers
                                        </ul>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--End of Primary source section-->
            <br />
            <!--Groundwater usage section-->
            <div class="container">
                <div class="row" id="title">
                    <p>Groundwater use</p>
                </div>
                <br />
                <div class="row">
                    <p>
                        Approximately 70 towns across Victoria rely on groundwater as either a supplementary or primary water
                        supply. Surface water can be unavailable to provide security supply in some areas, where groundwater
                        plays an important role in providing sustaining communities. Apart from this, groundwater is used widely
                        for irrigation purpose in Victoria. Approx. 15% state’s total water use from groundwater in Victoria.
                    </p>
                    <br />
                    <p>
                        Approx. 15% state’s total water use from groundwater in Victoria.
                    </p>
                </div>
                <!--Groundwater usage donut chart-->
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                        <img class="img-responsive" src="~/Content/Image/groundwater_use.png" draggable="false" style="padding-top:10%;" />
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                        <div id="donut-chart"></div>
                        <script>
                            var data = [{
                                values: [2, 12, 8, 78],
                                labels: ['Urban', 'Domestic and stock', 'Power generation', 'Irrigation/Commmercial/Salinity Control'],
                                domain: { column: 0 },
                                name: 'Groundwater use',
                                hoverinfo: 'label+percent',
                                hole: .4,
                                type: 'pie',
                                marker: { colors: ["#E7F2F8", "#74BDCB", "#FFA384", "#EFE7BC"] }
                            }];

                            var layout = {
                                //title: 'Groundwater Use in Victoria',
                                annotations: [
                                    {
                                        font: {
                                            size: 20
                                        },
                                        showarrow: false,
                                        text: ' ',
                                        x: 0.17,
                                        y: 0.5
                                    }
                                ],
                                margin: {
                                    l: 10,
                                    r: 10,
                                    b: 0,
                                    t: 50,
                                    pad: 4
                                },
                                showlegend: false,
                                grid: { rows: 1 }
                            };

                            Plotly.newPlot('donut-chart', data, layout, { displayModeBar: false, responsive: true });
                        </script>
                    </div>
                </div>
                <!--Groundwater usage donut section ends-->
            </div>
            <!--End of Groundwater use section-->
            <!--Risk indicator associated with the drinking water sources section-->
            <div class="row">
                <div class="container-fluid last-section">
                    <div class="container">
                        <div class="row" id="title">
                            <p>risk level of drinking water sources</p>
                        </div>
                        <br />
                        <div class="row">
                            <p>
                                Unsafe water kills more people each year than war and all other forms of violence combined. 
                                Therefore, it is necessary to drink water from the lowest risk sources.
                            </p>
                        </div>
                        <br />
                        <div class="row">
                            <p>
                                Levels of risk for different drinking water sources are shown in the risk hierarchy
                                below. Always use the highest quality of water available for drinking.
                            </p>
                        </div>
                        <div class="row">
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2"></div>
                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                <img class="img-responsive" draggable="false" src="~/Content/Image/level_risk.png" style="height:60%; width:60%; margin:auto;" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--End of Risk indicator section-->
            <br class="hidden-xs"/>
            <!--Restricted Groundwater usage map section-->
            <div class="container">
                <div class="row" id="title">
                    <p>Groundwater Restricted Uses</p>
                </div>
                <div class="row">
                    <p>
                        There are more than 1,000,000 million litres of stormwater flows into waterways per year in
                        Victoria. Only in Yarra River, there are 14,000 tonnes of sediment and 650 tonnes of nutrients
                        flow into waterways with stormwater, which polluted the water.
                    </p>
                </div>
                <br />
                <div class="row" style="text-align:center;">
                    <p>Check whether the groundwater in your suburb is restricted for usage.</p>
                </div>
                <br />
                <div class="row">
                    <div id="map-feature">
                        <label for="postcode">Enter your suburb or postcode to get started</label>
                        <div class="form-group has-feedback">
                            <input type="text" class="form-control" onfocus="complete()" id="postcode" placeholder="Melbourne, 3000" name="postcode" value="">
                            <i class="glyphicon glyphicon-search form-control-feedback"></i>
                        </div>
                    </div>
                    <div id="test"></div>
                    <script>
                        function complete() {
                            var sElements = document.getElementsByClassName("suburb");
                            var pElements = document.getElementsByClassName("post-code");

                            // suburbs and postcodes array
                            var spcs = [];
                            var count = 0;
                            for (i = 0; i < sElements.length; i++) {
                                var pc = pElements[i].innerHTML.trim();
                                var s = sElements[i].innerHTML.trim();

                                spcs.push(s + ", " + pc);
                            }

                            function onlyUnique(value, index, self) {
                                return self.indexOf(value) === index;
                            }

                            var unique = spcs.filter(onlyUnique);

                            $("#postcode").autocomplete({
                                source: unique,
                                select: showText
                            });

                            function showText(event, ui) {
                                //$('#result').text(ui.item.label)
                                console.log(ui.item.label);
                                getPostcode(ui.item.label);
                            }
                        }

                        function getPostcode(pcode) {
                            //document.getElementById("result-map").hidden = true;
                            //document.getElementById("result-map").style.width = "0";
                            //document.getElementById("result-map").style.height = "0";

                            //pcode = document.forms[0].postcode.value;
                            var res = pcode.substring(pcode.length - 4, pcode.length);

                            // postcode elements
                            pcElements = document.getElementsByClassName("post-code");

                            // restricted use elements
                            ruElements = document.getElementsByClassName("restriced_use");

                            var i;
                            for (i = 0; i < pcElements.length; i++) {
                                pcElements[i].closest('tr').hidden = false;
                            }
                            var count = 0;
                            for (i = 0; i < pcElements.length; i++) {
                                var postcode = pcElements[i].innerHTML.trim();
                                if (postcode === res) {
                                    count += 1;
                                    pcElements[i].closest('tr').setAttribute("id", "result");
                                } else {
                                    pcElements[i].closest('tr').hidden = true;
                                }
                            }

                            if (count == 0) {
                                document.getElementById("no-result").innerHTML = "No results found for " + pcode + ".<br />";
                                document.getElementById("no-result").hidden = false;
                                document.getElementById("gru-table").hidden = true;
                                document.getElementById("placeholder").hidden = true;
                                document.getElementById("result-map").hidden = true;
                                document.getElementById("result-information").hidden = true;
                            } else {
                                document.getElementById("placeholder").innerHTML = "Showing results for " + pcode + ".<br />";
                                document.getElementById("no-result").hidden = true;
                                document.getElementById("gru-table").hidden = false;
                                document.getElementById("placeholder").hidden = false;
                                document.getElementById("result-map").hidden = false;
                                document.getElementById("result-information").hidden = false;
                            }

                            document.getElementById("postcode").setAttribute("value", pcode);
                            document.getElementById("gru-results").style.display = "block";

                            return false;
                        }
                    </script>
                </div>
                <div class="row" id="gru-results" style="display:none;">
                    <div id="placeholder" name="placeholder"></div>
                    <div id="no-result" name="no-result" hidden></div>
                    <table id="gru-table" class="table" style="font-size: 0.8em;">
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.Address)
                            </th>
                            <th hidden>
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Suburb)
                            </th>
                            <th hidden>
                            </th>
                            <th hidden>
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Site_history)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Restricted_uses)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Map_link)
                            </th>
                            @*<th></th>*@
                        </tr>
                        @foreach (var item in Model)
                        {
                            <tr class="coordinates">
                                <td>
                                    @Html.DisplayFor(modelItem => item.Address)
                                </td>
                                <td class="post-code" hidden>
                                    @Html.DisplayFor(modelItem => item.Post_Code)
                                </td>
                                <td class="suburb">
                                    @Html.DisplayFor(modelItem => item.Suburb)
                                </td>
                                <td hidden class="latitude">
                                    @Html.DisplayFor(modelItem => item.Latitude)
                                </td>
                                <td hidden class="longitude">
                                    @Html.DisplayFor(modelItem => item.Longitude)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Site_history)
                                </td>
                                <td class="restricted_use" style="color:red;">
                                    @Html.DisplayFor(modelItem => item.Restricted_uses)
                                </td>
                                <td>
                                    <a href="@Html.DisplayFor(modelItem => item.Map_link)" target="_blank">More details</a>
                                </td>
                            </tr>
                        }
                    </table>
                </div>
                <div class="row" id="result-map" hidden>
                    <button class="btn btn-default" onclick="openMap()">Show on Map</button>
                    <div id="map" style="height:50vh;width:100%"></div>
                </div>
                <div class="row" id="result-information" hidden>
                    <p>
                        The groundwater in the restricted areas is not suitable for drinking purposes.
                        Apart from having harmful effects on human health, it also destroys pumps, metallic
                        pipes and tanks in your houses due to corrosion. The consequences of this problem are
                        health critical as the corrosion makes the water unsuitable for drinking due to the
                        high dissolved contents of copper, which get mixed with the water.
                    </p>
                </div>
            </div>
            <!--End of Groundwater restricted usage map section-->
            <br />
            <!--DIY Video Section-->
            <div class="row">
                <div class="container-fluid last-section">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-2"></div>
                            <div class="col-md-8" id="youtube-video">
                                <div class="row">
                                    <p>
                                        The DIY video below is a simple distillation experiment video which helps to treat the saline water so that it can be reused.
                                    </p>
                                </div>
                                <div class="row">
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/QGLy71-kU2Q?controls=1" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--End of DIY video section-->
            <!--Solution flip card section-->
            <div class="row">
                <section class="container-fluid">
                    <br />
                    <div class="row" id="title">
                        <p>Some tips to reduce Stormwater Pollution</p>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                            <div class="cardContainerLitter inactive">
                                <div class="card">
                                    <div class="side front">
                                        <div class="img waste"></div>
                                        <div class="info">
                                            <h2 style="text-align: center;">Waste Management</h2>
                                            <p align="center">Correct waste managenment not only helps to reduce pollution but also improves living quality.</p>
                                        </div>
                                    </div>
                                    <div class="side back">
                                        <div class="info">
                                            <h2 style="text-align: center;">Waste Management Tips</h2>

                                            <ul style="">
                                                <li>Using traps such as grates and screens outside your house or neighbourhood can prevent unwanted litter from entering the stormwater drains.</li>
                                                <li>Whenever you go out with your pet make sure that you clean and dispose of the pet waste in the right bin.</li>
                                                <li>Reducing the waste and doing Garbage sorting to avoid the litter dropped in the streets and eventually transported into drainage.</li>
                                                <li>Reusing recyclable waste can help to reduce the total waste generation and reduce unwanted waste from polluting the waterways.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                            <div class="cardContainerLitter inactive">
                                <div class="card">
                                    <div class="side front">
                                        <div class="img garden"></div>
                                        <div class="info">
                                            <h2 style="text-align: center;">Rainwater Harvesting</h2>
                                            <p align="center">Rain water harvesting helps to conserve and reuse the stormwater to water the garden.</p>
                                        </div>
                                    </div>
                                    <div class="side back">
                                        <div class="info">
                                            <h2 style="text-align: center;">Rainwater Harvesting</h2>
                                            <ul>
                                                <li>Plant more native plants in the gardens or nearby areas as these plants do not require fertilizers or chemicals. </li>
                                                <li>Consider using low environmental impact pest control products for gardening.</li>
                                                <li>Use the water collected from rainwater harvesting for washing vehicles.</li>
                                                <li>Using a low-maintenance garden known as Raingarden can help to collect the stormwater that runs off the hard surfaces during the rain.</li>
                                                <li>Reuse the stormwater to water the garden.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                            <div class="cardContainerLitter inactive">
                                <div class="card">
                                    <div class="side front">
                                        <div class="img eco"></div>
                                        <div class="info">
                                            <h2 style="text-align: center;">Eco-Friendly Consumptions</h2>
                                            <p align="center">Eco-friendly methods not only help us to reduce the litter but also helps to preserve natural resources.</p>
                                        </div>
                                    </div>
                                    <div class="side back">
                                        <div class="info">
                                            <h2 style="text-align: center;">Eco-Friendly Methods</h2>
                                            <ul>
                                                <li>Consider using eco-friendly organic detergents and soaps.</li>
                                                <li>Consider using the organic materials as garden mulch rather than sweeping down into the drainage.</li>
                                                <li>Increase the usage of paper or cloth bags rather than plastic shopping bags.</li>
                                                <li>Increasings the usage of cycles or public transport can help in reducing oil spils on roads.</li>
                                                <li>Convert the organic wastes at home into biogas.</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <script type="text/javascript">
                            const cards = document.querySelectorAll('.card');

                            function transition() {
                                if (this.classList.contains('active')) {
                                    this.classList.remove('active');
                                } else {
                                    this.classList.add('active');
                                }
                            }

                            cards.forEach(card => card.addEventListener('click', transition));
                        </script>
                    </div>
                </section>
            </div>
            <!--End of Solution section-->
        </div>
    </div>
</div>
<!--End of Stormwater pollution section-->
<script>
    function drawChart(svg, newWidth, newHeight) {
        //margin = { top: 7, right: 10, bottom: 7, left: 10 },

        var width = newWidth - margin.left - margin.right,
            height = newHeight - margin.top - margin.bottom;
        var defaultColor = "black";
        var fontFamilty = "sans-serif";
        var innerCicleTextFontSize = "18px";
        var arrowCircleBorderWidth = "3px";
        var circleDefaultRadius = 50, circleHoverRadius = 55;
        var circleNumberColor = "black";

        // font-family: calibri;
        // default background dark color: #4F9DE7
        // light color: #8DC5E8

        /*
        var svg = d3.select("#renderToDiv").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .attr("viewbox", "0 0 800 570")
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");
        */
        svg.select("g").remove();
        svg = svg.append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

        // Arrows
        var svgDefs = svg.append("svg:defs");

        svgDefs.append("svg:marker")
            .attr("id", "triangle")
            .attr("refX", 6)
            .attr("refY", 6)
            .attr("markerWidth", 40)
            .attr("markerHeight", 40)
            .attr("markerUnits", "userSpaceOnUse")
            .attr("orient", "auto")
            .append("path")
            .attr("d", "M 0 0 12 6 0 12 3 6")
            .style("fill", defaultColor);

        // <rect id="rect" x="25%" y="25%" width="50%" height="50%" rx="15"/>
        //        svgDefs.append("rect")
        //            .attr("x", "25%")
        //            .attr("y", "25%").attr("width", "50%")
        //            .attr("height", "50%").attr("rx", "15");
        //        svgDefs.append("clipPath").attr("id", "clip")
        //            .append("use").attr("xlink:href", "#rect");

        //<use xlink:href="#rect" stroke-width="2" stroke="black"/>
        //svg.append("use").attr("xlink:href", "#rect").attr("stroke-width", "2").attr("stroke" , "black");

        // pattern for rain image, for showing image inside circle
        svgDefs.append("pattern")
            .attr("id", "rainImage")
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("width", "100%")
            .attr("height", "100%").attr("viewBox", "0 0 100 100")
            .append('image')
            .attr('xlink:href', 'https://waterwegenvic.ml/Content/Image/WaterCycle/rain.png')
            .attr('width', 100)
            .attr('height', 100)
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("opacity", "0.7");

        // pattern for storm image, for showing image inside circle
        svgDefs.append("pattern")
            .attr("id", "stormWaterImage")
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("width", "100%")
            .attr("height", "100%").attr("viewBox", "0 0 100 100")
            .append('image')
            .attr('xlink:href', 'https://waterwegenvic.ml/Content/Image/WaterCycle/stormwater.png')
            .attr('width', 100)
            .attr('height', 100)
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("opacity", "0.7");

        // pattern for drinking water image, for showing image inside circle
        svgDefs.append("pattern")
            .attr("id", "drinkingWaterImage")
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("width", "100%")
            .attr("height", "100%").attr("viewBox", "0 0 100 100")
            .append('image')
            .attr('xlink:href', 'https://waterwegenvic.ml/Content/Image/WaterCycle/drinkingwater.png')
            .attr('width', 100)
            .attr('height', 100)
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("opacity", "0.7");

        // pattern for ground water image, for showing image inside circle
        svgDefs.append("pattern")
            .attr("id", "groundWaterImage")
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("width", "100%")
            .attr("height", "100%").attr("viewBox", "0 0 100 100")
            .append('image')
            .attr('xlink:href', 'https://waterwegenvic.ml/Content/Image/WaterCycle/groundwater.png')
            .attr('width', 100)
            .attr('height', 100)
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("opacity", "0.7");

        // pattern for ground water image, for showing image inside circle
        svgDefs.append("pattern")
            .attr("id", "waterWayImage")
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("width", "100%")
            .attr("height", "100%").attr("viewBox", "0 0 100 100")
            .append('image')
            .attr('xlink:href', 'https://waterwegenvic.ml/Content/Image/WaterCycle/waterways_.png')
            .attr('width', 100)
            .attr('height', 100)
            .attr("x", "0%")
            .attr("y", "0%")
            .attr("opacity", "0.7");

        // title
        svg.append("text")
            .attr("x", 120)
            .attr("y", 22)
            .attr("dy", "0.71em")
            .style("font-size", "26px")
            .text("The Life Cycle of Water")
            .style("font-family", fontFamilty)
            //.style("text-anchor","middle")
            .style("text-decoration", "underline")
            .style("fill", defaultColor);

        svg.append("text")
            .attr("x", 130)
            .attr("y", 60)
            .attr("dy", "0.71em")
            .style("font-size", "15px")
            //.style("text-anchor", "middle")
            .text("click on the circle to learn more details")
            .style("font-family", fontFamilty)
            .style("fill", defaultColor);

        var hoverTransition = 100;

        // Rain
        // Circle top text
        svg.append("text")
            .attr("x", 250)
            .attr("y", 80)
            .attr("dy", "0.71em")
            .style("font-size", "15px")
            .text("1")
            .style("font-family", fontFamilty)
            .style("text-anchor", "middle")
            .style("fill", defaultColor);

        svg.append("circle")
            .attr("cx", 250)
            .attr("cy", 150)
            .attr("r", circleDefaultRadius)
            .style("fill", "url(#rainImage)")
            .style("stroke", defaultColor)
            .style("stroke-width", arrowCircleBorderWidth)
            .attr("class", "cirlceRain")
            .on("mouseover", function (d) {
                d3.select(this)
                    .transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .style("cursor", "pointer")
            .on("mouseout", function (d) {
                d3.select(this)
                    .transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .on("click", function () {
                $('#rainDetailModal').modal('show');
            });

        var circleInnerColor = "black";

        svg.append("text")
            .attr("x", 250)
            .attr("y", 150)
            .attr("dy", "0.3em")
            .style("font-family", fontFamilty)
            .style("fill", circleInnerColor)
            .style("font-size", innerCicleTextFontSize)
            .text("Rain")
            .style("cursor", "pointer")
            .attr("class", "textRain")
            .style("text-anchor", "middle")
            .on("mouseover", function (d) {
                d3.select(".cirlceRain")
                    .transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .on("mouseout", function (d) {
                d3.select(".cirlceRain")
                    .transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .on("click", function () {
                $('#rainDetailModal').modal('show');
            });

        // Water way
        // Circle top text
        svg.append("text")
            .attr("x", 50)
            .attr("y", 210)
            .attr("dy", "0.71em")
            .style("font-size", "15px")
            .text("5")
            .style("font-family", fontFamilty)
            .style("text-anchor", "middle")
            .style("fill", defaultColor);
        svg.append("circle")
            .attr("cx", 50)
            .attr("cy", 280)
            .attr("r", circleDefaultRadius)
            .style("fill", "url(#waterWayImage)")
            .style("stroke", defaultColor)
            .style("stroke-width", arrowCircleBorderWidth)
            .attr("class", "cirlceWaterway")
            .style("cursor", "pointer")
            .on("mouseover", function (d) {
                //d3.select(this).style("fill", "grey");
                d3.select(this)
                    .transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .on("mouseout", function (d) {
                //d3.select(this).style("fill", "url(#waterWayImage)");
                d3.select(this)
                    .transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .on("click", function () {
                $('#waterWayDetailModal').modal('show');
            });



        var txtWaterWay = svg.append("text")
            .attr("x", 50)
            .attr("y", 280)
            .style("font-family", fontFamilty)
            .style("fill", circleInnerColor)
            .style("font-size", innerCicleTextFontSize)
            .attr("class", "textWaterway")
            .style("text-anchor", "middle")
            .style("cursor", "pointer")
            .on("mouseover", function (d) {
                d3.select(".cirlceWaterway").transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .on("mouseout", function (d) {
                d3.select(".cirlceWaterway").transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .on("click", function () {
                $('#waterWayDetailModal').modal('show');;
            });

        txtWaterWay.append("tspan").attr("dy", "0.0em").text("Water-");
        txtWaterWay.append("tspan").attr("dy", "1em").attr("x", 50).text("ways");

        // Storm water
        // Circle top text
        svg.append("text")
            .attr("x", 460)
            .attr("y", 210)
            .attr("dy", "0.71em")
            .style("font-size", "15px")
            .text("2")
            .style("font-family", fontFamilty)
            .style("text-anchor", "middle")
            .style("fill", defaultColor);
        svg.append("circle")
            .attr("cx", 460)
            .attr("cy", 280)
            .attr("r", circleDefaultRadius)
            .style("fill", "url(#stormWaterImage)")
            .style("stroke", defaultColor)
            .attr("class", "cirlceStormWater")
            .style("stroke-width", arrowCircleBorderWidth)
            .on("mouseover", function (d) {
                d3.select(this).transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .style("cursor", "pointer")
            .on("mouseout", function (d) {
                d3.select(this).transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            }).on("click", function () {
                $('#stormWaterDetailModal').modal('show');;
            });

        var txtStormWater = svg.append("text")
            .attr("x", 460)
            .attr("y", 280)
            .style("font-family", fontFamilty)
            .style("fill", circleInnerColor)//defaultColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "middle")
            .on("mouseover", function (d) {
                d3.select(".cirlceStormWater").transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .on("mouseout", function (d) {
                d3.select(".cirlceStormWater").transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .style("cursor", "pointer")
            .on("click", function () {
                $('#stormWaterDetailModal').modal('show');
            });

        txtStormWater.append("tspan").attr("dy", "0.0em").text("Storm-");
        txtStormWater.append("tspan").attr("dy", "1em").attr("x", 460).text("water");

        // ground water
        // Circle top text
        svg.append("text")
            .attr("x", 250)
            .attr("y", 330)
            .attr("dy", "0.71em")
            .style("font-size", "15px")
            .text("3")
            .style("font-family", fontFamilty)
            .style("text-anchor", "middle")
            .style("fill", defaultColor);
        svg.append("circle")
            .attr("cx", 250)
            .attr("cy", 400)
            .attr("r", circleDefaultRadius)
            .style("fill", "url(#groundWaterImage)")
            .style("stroke", defaultColor)
            .style("stroke-width", arrowCircleBorderWidth)
            .attr("class", "cirlceGroundWater")
            .on("mouseover", function (d) {
                d3.select(this).transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .style("cursor", "pointer")
            .on("mouseout", function (d) {
                d3.select(this).transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .on("click", function () {
                $('#groundWaterDetailModal').modal('show');;
            });

        var txtGroundWater = svg.append("text")
            .attr("x", 250)
            .attr("y", 400)
            .style("font-family", fontFamilty)
            .style("fill", circleInnerColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "middle")
            .on("mouseover", function (d) {
                d3.select(".cirlceGroundWater").transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .on("mouseout", function (d) {
                d3.select(".cirlceGroundWater").transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .style("cursor", "pointer")
            .on("click", function () {
                $('#groundWaterDetailModal').modal('show');;
            });

        txtGroundWater.append("tspan").attr("dy", "0.0em").text("Ground-");
        txtGroundWater.append("tspan").attr("dy", "1em").attr("x", 250).text("water");

        // Drinking water
        // Circle top text
        svg.append("text")
            .attr("x", 460)
            .attr("y", 430)
            .attr("dy", "0.71em")
            .style("font-size", "15px")
            .text("4")
            .style("font-family", fontFamilty)
            .style("text-anchor", "middle")
            .style("fill", defaultColor);
        svg.append("circle")
            .attr("cx", 460)
            .attr("cy", 500)
            .attr("r", circleDefaultRadius)
            .style("fill", "url(#drinkingWaterImage)")
            .style("stroke", defaultColor)
            .attr("class", "cirlceDrinkingWater")
            .style("stroke-width", arrowCircleBorderWidth)
            .on("mouseover", function (d) {
                d3.select(this).transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .style("cursor", "pointer")
            .on("mouseout", function (d) {
                d3.select(this).transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .on("click", function () {
                $('#drinkingWaterDetailModal').modal('show');
            });

        var txtDrinkingWater = svg.append("text")
            .attr("x", 460)
            .attr("y", 500)
            .style("font-family", fontFamilty)
            .style("fill", circleInnerColor)//defaultColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "middle")
            .on("mouseover", function (d) {
                d3.select(".cirlceDrinkingWater").transition()
                    .duration(hoverTransition)
                    .attr('r', circleHoverRadius);
            })
            .on("mouseout", function (d) {
                d3.select(".cirlceDrinkingWater").transition()
                    .duration(hoverTransition)
                    .attr('r', circleDefaultRadius);
            })
            .style("cursor", "pointer")
            .on("click", function () {
                $('#drinkingWaterDetailModal').modal('show');;
            });

        txtDrinkingWater.append("tspan").attr("dy", "0.0em").text("Drinking");
        txtDrinkingWater.append("tspan").attr("dy", "1em").attr("x", 460).text("Water");

        // Add arrows
        //1
        svg.append("line")
            .attr("x1", 75)
            .attr("y1", 230)
            .attr("x2", 190)
            .attr("y2", 150)
            .attr("stroke-width", arrowCircleBorderWidth)
            .attr("stroke", defaultColor)
            .attr("marker-end", "url(#triangle)");

        var arrowCaptionFontSize = "16px";
        // add evaporate text
        svg.append("text")
            .attr("x", 135)
            .attr("y", 170)
            .attr("dy", "0.71em")
            .text("evaporate")
            .style("font-family", fontFamilty)
            .style("fill", defaultColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "end");

        // arrow 2
        svg.append("line")
            .attr("x1", 305)
            .attr("y1", 150)
            .attr("x2", 425)
            .attr("y2", 230)
            .attr("stroke-width", arrowCircleBorderWidth)
            .attr("stroke", defaultColor)
            .attr("marker-end", "url(#triangle)");

        // add falls to the earth
        var arrowCaption = svg.append("text")
            .attr("x", 365)
            .attr("y", 180)
            .attr("dy", "0.71em")
            .style("font-family", fontFamilty)
            .style("fill", defaultColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "start");

        arrowCaption.append("tspan").attr("dy", "0.1em").text("falls to");
        arrowCaption.append("tspan").attr("dy", "1em").attr("x", "385").text("the earth");

        //// arrow 3
        svg.append("line")
            .attr("x1", 425)
            .attr("y1", 325)
            .attr("x2", 310)
            .attr("y2", 380)
            .attr("stroke-width", arrowCircleBorderWidth)
            .attr("stroke", defaultColor)
            .attr("marker-end", "url(#triangle)");

        // add becomes text
        svg.append("text")
            .attr("x", 370)
            .attr("y", 365)
            .attr("dy", "0.3em")
            .text("becomes")
            .style("font-family", fontFamilty)
            .style("fill", defaultColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "start");

        //// arrow 4
        svg.append("line")
            .attr("x1", 195)
            .attr("y1", 380)
            .attr("x2", 95)
            .attr("y2", 320)
            .attr("stroke-width", arrowCircleBorderWidth)
            .attr("stroke", defaultColor)
            .attr("marker-end", "url(#triangle)");

        // add effect text
        svg.append("text")
            .attr("x", 145)
            .attr("y", 360)
            .attr("dy", "0.3em")
            .text("effect")
            .style("font-family", fontFamilty)
            .style("fill", defaultColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "end");

        //// arrow 5
        svg.append("line")
            .attr("x1", 300)
            .attr("y1", 420)
            .attr("x2", 400)
            .attr("y2", 480)
            .attr("stroke-width", arrowCircleBorderWidth)
            .attr("stroke", defaultColor)
            .attr("marker-end", "url(#triangle)");

        // add provides text
        svg.append("text")
            .attr("x", 350)
            .attr("y", 460)
            .attr("dy", "0.3em")
            .text("provides")
            .style("font-family", fontFamilty)
            .style("fill", defaultColor)
            .style("font-size", innerCicleTextFontSize)
            .style("text-anchor", "end");
    }

    //drawChart();

    //var margin = { top: 7, right: 10, bottom: 7, left: 10 };
    //var containerWidth = 0, containerHeight = 0;

    var margin = { top: 10, right: 20, bottom: 10, left: 120 }
    var containerWidth = 0, containerHeight = 0;

    function responsivefy(svg) {
        var w = 800, h = 580;

        // get container + svg aspect ratio
        var container = d3.select(svg.node().parentNode),
            width = parseInt(svg.style("width")),
            height = parseInt(svg.style("height")),
            aspect = w / h;//width / height;

        // add viewBox and preserveAspectRatio properties,
        // and call resize so that svg resizes on inital page load
        svg.attr("viewBox", "0 0 " + w + " " + h)
            .attr("perserveAspectRatio", "xMidYMid meet")
            .call(resize);

        // to register multiple listeners for same event type,
        // you need to add namespace, i.e., 'click.foo'
        // necessary if you call invoke this function for multiple svgs
        // api docs: https://github.com/mbostock/d3/wiki/Selections#on
        d3.select(window).on("resize." + container.attr("id"), resize);

        // get width of container and resize svg to fit it
        function resize() {
            var targetWidth = parseInt(container.style("width"));
            var targetHeight = 0;
            /*
            if (targetWidth > 800) {
                targetWidth = 800;
                targetHeight = 570;
            }
            else {
                targetHeight = Math.round(targetWidth / aspect);
            }
            */

            targetHeight = Math.round(targetWidth / aspect);

            svg.attr("width", targetWidth);
            svg.attr("height", Math.round(targetWidth / aspect));

            drawChart(svg, targetWidth, Math.round(targetWidth / aspect));
        }
    }

    d3.select("#renderToDiv").append("svg")
        .attr("width", 800)
        .attr("height", 580)
        .call(responsivefy);

</script>
